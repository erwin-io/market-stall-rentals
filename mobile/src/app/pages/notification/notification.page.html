<ion-header no-border no-shadow>
  <ion-toolbar mode="md" color="primary">
    <div slot="start" style="width: 48px"></div>
    <ion-title class="ion-text-center">
      <h1>Notifications</h1>
    </ion-title>
    <div slot="end" style="width: 48px"></div>
  </ion-toolbar>
</ion-header>

<ion-content mode="md">
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh()" class="refresher-custom">
    <ion-refresher-content >
    </ion-refresher-content>
  </ion-refresher>
  <ng-container *ngIf="!isLoading; else loadingTemplate">
    <ng-container *ngIf="notofications.length > 0; else noCollectionTemplate">
      <ng-container *ngFor="let item of notofications">
        <ion-item class="item {{!item.isRead ? 'unread' : ''}}" lines="full" detail="false" button (click)="onNotificationClick(item)">
          <ion-label color="primary">
            <h2 [class]="item.isRead ? 'desc' : 'desc unread'">{{item.title}}</h2>
            <h3 [class]="item.isRead ? 'sub-title' : 'sub-title unread'">{{ item.description}}</h3>
            <h3 [class]="item.isRead ? 'desc' : 'desc unread'">{{item.date | timeAgo }}</h3>
            <span *ngIf="!item.isRead" class="unread-symbol" ></span>
          </ion-label>
        </ion-item>
      </ng-container>
      <br>
      <ion-button *ngIf="notofications && notofications.length >= pageSize && notofications.length < total" fill="clear" size="small" expand="full" (click)="loadMore()"><h2>Load more...</h2></ion-button>
      <br>
      <br>
    </ng-container>
  </ng-container>

  <ng-template #noCollectionTemplate>
    <div class="no-collections-result">
      <ion-icon name="notifications-outline"></ion-icon>
      <h1>No collections to show</h1>
      <br>
    </div>
  </ng-template>

  <ng-template #loadingTemplate>
    <ion-item lines="full" detail="false" >
      <ion-label color="primary" slot="start">
        <h2 class="desc"><ion-skeleton-text style="min-height: 25px;max-width: 100%;width: 60px;" [animated]="true"></ion-skeleton-text></h2>
        <h3 class="sub-title"><ion-skeleton-text style="min-height: 20px;min-width: 100%;max-width: 100%;" [animated]="true"></ion-skeleton-text></h3>
      </ion-label>
      <ion-label color="primary" slot="end">
        <h2><ion-skeleton-text style="min-height: 25px;max-width: 100%; width: 40px;" [animated]="true"></ion-skeleton-text></h2>
      </ion-label>
    </ion-item>
    <ion-item lines="full" detail="false" >
      <ion-label color="primary" slot="start">
        <h2 class="desc"><ion-skeleton-text style="min-height: 25px;max-width: 100%;width: 60px;" [animated]="true"></ion-skeleton-text></h2>
        <h3 class="sub-title"><ion-skeleton-text style="min-height: 20px;min-width: 100%;max-width: 100%;" [animated]="true"></ion-skeleton-text></h3>
      </ion-label>
      <ion-label color="primary" slot="end">
        <h2><ion-skeleton-text style="min-height: 25px;max-width: 100%; width: 40px;" [animated]="true"></ion-skeleton-text></h2>
      </ion-label>
    </ion-item>
    <ion-item lines="full" detail="false" >
      <ion-label color="primary" slot="start">
        <h2 class="desc"><ion-skeleton-text style="min-height: 25px;max-width: 100%;width: 60px;" [animated]="true"></ion-skeleton-text></h2>
        <h3 class="sub-title"><ion-skeleton-text style="min-height: 20px;min-width: 100%;max-width: 100%;" [animated]="true"></ion-skeleton-text></h3>
      </ion-label>
      <ion-label color="primary" slot="end">
        <h2><ion-skeleton-text style="min-height: 25px;max-width: 100%; width: 40px;" [animated]="true"></ion-skeleton-text></h2>
      </ion-label>
    </ion-item>
  </ng-template>
</ion-content>
